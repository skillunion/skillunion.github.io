var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=='function'?Object.defineProperty:function(b,c,a){a=a;if(b==Array.prototype||b==Object.prototype){return}b[c]=a.value};$jscomp.getGlobal=function(a){return typeof window!='undefined'&&window===a?a:typeof global!='undefined'&&global!=null?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(i,f,j,k){if(!f){return}var a=$jscomp.global;var b=i.split('.');for(var e=0;e<b.length-1;e++){var d=b[e];if(!(d in a)){a[d]={}}a=a[d]}var g=b[b.length-1];var h=a[g];var c=f(h);if(c==h||c==null){return}$jscomp.defineProperty(a,g,{configurable:!0,writable:!0,value:c})};$jscomp.polyfill('Array.prototype.copyWithin',function(a){if(a){return a}var b=function(d,c,b){var e=this.length;d=Number(d);c=Number(c);b=Number(b!=null?b:e);if(d<c){b=Math.min(b,e);while(c<b){if(c in this){this[d++]=this[c++]}else {delete this[d++];c++}}}else {b=Math.min(b,e+c-d);d+=b-c;while(b>c){if(--b in this){this[--d]=this[b]}else {delete this[d]}}}return this};return b},'es6','es3');$jscomp.SYMBOL_PREFIX='jscomp_symbol_';$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};if(!$jscomp.global['Symbol']){$jscomp.global['Symbol']=$jscomp.Symbol}};$jscomp.Symbol=function(){var a=0;function Symbol(b){return $jscomp.SYMBOL_PREFIX+(b||'')+a++}return Symbol}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global['Symbol'].iterator;if(!a){a=$jscomp.global['Symbol'].iterator=$jscomp.global['Symbol']('iterator')}if(typeof Array.prototype[a]!='function'){$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}})}$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){if(b<a.length){return {done:!1,value:a[b++]}}else {return {done:!0}}})};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();var a={next:b};a[$jscomp.global['Symbol'].iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator();if(a instanceof String){a=a+''}var c=0;var b={next:function(){if(c<a.length){var e=c++;return {value:d(e,a[e]),done:!1}}b.next=function(){return {done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};$jscomp.polyfill('Array.prototype.entries',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b,c){return [b,c]})};return b},'es6','es3');$jscomp.polyfill('Array.prototype.fill',function(a){if(a){return a}var b=function(f,c,b){var d=this.length||0;if(c<0){c=Math.max(0,d+c)}if(b==null||b>d){b=d}b=Number(b);if(b<0){b=Math.max(0,d+b)}for(var e=Number(c||0);e<b;e++){this[e]=f}return this};return b},'es6','es3');$jscomp.findInternal=function(a,d,e){if(a instanceof String){a=String(a)}var f=a.length;for(var b=0;b<f;b++){var c=a[b];if(d.call(e,c,b,a)){return {i:b,v:c}}}return {i:-1,v:void 0}};$jscomp.polyfill('Array.prototype.find',function(a){if(a){return a}var b=function(c,b){return $jscomp.findInternal(this,c,b).v};return b},'es6','es3');$jscomp.polyfill('Array.prototype.findIndex',function(a){if(a){return a}var b=function(c,b){return $jscomp.findInternal(this,c,b).i};return b},'es6','es3');$jscomp.polyfill('Array.from',function(a){if(a){return a}var b=function(b,c,g){$jscomp.initSymbolIterator();c=c!=null?c:function(d){return d};var d=[];var f=b[Symbol.iterator];if(typeof f=='function'){b=f.call(b);var h;while(!(h=b.next()).done){d.push(c.call(g,h.value))}}else {var i=b.length;for(var e=0;e<i;e++){d.push(c.call(g,b[e]))}}return d};return b},'es6','es3');$jscomp.polyfill('Object.is',function(a){if(a){return a}var b=function(b,c){if(b===c){return b!==0||1/b===1/c}else {return b!==b&&c!==c}};return b},'es6','es3');$jscomp.polyfill('Array.prototype.includes',function(a){if(a){return a}var b=function(d,e){var b=this;if(b instanceof String){b=String(b)}var f=b.length;for(var c=e||0;c<f;c++){if(b[c]==d||Object.is(b[c],d)){return !0}}return !1};return b},'es7','es3');$jscomp.polyfill('Array.prototype.keys',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b){return b})};return b},'es6','es3');$jscomp.polyfill('Array.of',function(a){if(a){return a}var b=function(b){return Array.from(arguments)};return b},'es6','es3');$jscomp.polyfill('Array.prototype.values',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(c,b){return b})};return b},'es6','es3');$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.polyfill('Promise',function(c){if(c&&!$jscomp.FORCE_POLYFILL_PROMISE){return c}function AsyncExecutor(){this.batch_=null}AsyncExecutor.prototype.asyncExecute=function(a){if(this.batch_==null){this.batch_=[];this.asyncExecuteBatch_()}this.batch_.push(a);return this};AsyncExecutor.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var e=$jscomp.global['setTimeout'];AsyncExecutor.prototype.asyncExecuteFunction=function(a){e(a,0)};AsyncExecutor.prototype.executeBatch_=function(){while(this.batch_&&this.batch_.length){var b=this.batch_;this.batch_=[];for(var a=0;a<b.length;++a){var d=b[a];delete b[a];try{d()}catch(f){this.asyncThrow_(f)}}}this.batch_=null};AsyncExecutor.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a})};var b={PENDING:0,FULFILLED:1,REJECTED:2};var a=function(d){this.state_=b.PENDING;this.result_=undefined;this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{d(a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.createResolveAndReject_=function(){var b=this;var a=!1;function firstCallWins(d){return function(e){if(!a){a=!0;d.call(b,e)}}}return {resolve:firstCallWins(this.resolveTo_),reject:firstCallWins(this.reject_)}};a.prototype.resolveTo_=function(b){if(b===this){this.reject_(new TypeError('A Promise cannot resolve to itself'))}else {if(b instanceof a){this.settleSameAsPromise_(b)}else {if(isObject(b)){this.resolveToNonPromiseObj_(b)}else {this.fulfill_(b)}}}};a.prototype.resolveToNonPromiseObj_=function(b){var a=undefined;try{a=b.then}catch(f){this.reject_(f);return}if(typeof a=='function'){this.settleSameAsThenable_(a,b)}else {this.fulfill_(b)}};function isObject(a){switch(typeof a){case 'object':return a!=null;case 'function':return !0;default:return !1;}}a.prototype.reject_=function(a){this.settle_(b.REJECTED,a)};a.prototype.fulfill_=function(a){this.settle_(b.FULFILLED,a)};a.prototype.settle_=function(d,a){if(this.state_!=b.PENDING){throw new Error('Cannot settle('+d+', '+a|'): Promise already settled in state'+this.state_)}this.state_=d;this.result_=a;this.executeOnSettledCallbacks_()};a.prototype.executeOnSettledCallbacks_=function(){if(this.onSettledCallbacks_!=null){var b=this.onSettledCallbacks_;for(var a=0;a<b.length;++a){b[a].call();b[a]=null}this.onSettledCallbacks_=null}};var d=new AsyncExecutor();a.prototype.settleSameAsPromise_=function(b){var a=this.createResolveAndReject_();b.callWhenSettled_(a.resolve,a.reject)};a.prototype.settleSameAsThenable_=function(b,d){var a=this.createResolveAndReject_();try{b.call(d,a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.then=function(f,g){var b;var d;var e=new a(function(a,e){b=a;d=e});function createCallback(a,e){if(typeof a=='function'){return function(h){try{b(a(h))}catch(i){d(i)}}}else {return e}}this.callWhenSettled_(createCallback(f,b),createCallback(g,d));return e};a.prototype['catch']=function(a){return this.then(undefined,a)};a.prototype.callWhenSettled_=function(e,f){var a=this;function callback(){switch(a.state_){case b.FULFILLED:e(a.result_);break;case b.REJECTED:f(a.result_);break;default:throw new Error('Unexpected state: '+a.state_);}}if(this.onSettledCallbacks_==null){d.asyncExecute(callback)}else {this.onSettledCallbacks_.push(function(){d.asyncExecute(callback)})}};function resolvingPromise(b){if(b instanceof a){return b}else {return new a(function(a,d){a(b)})}}a['resolve']=resolvingPromise;a['reject']=function(b){return new a(function(d,a){a(b)})};a['race']=function(b){return new a(function(e,f){var d=$jscomp.makeIterator(b);for(var a=d.next();!a.done;a=d.next()){resolvingPromise(a.value).callWhenSettled_(e,f)}})};a['all']=function(e){var d=$jscomp.makeIterator(e);var b=d.next();if(b.done){return resolvingPromise([])}else {return new a(function(g,h){var a=[];var f=0;function onFulfilled(b){return function(d){a[b]=d;f--;if(f==0){g(a)}}}do{a.push(undefined);f++;resolvingPromise(b.value).callWhenSettled_(onFulfilled(a.length-1),h);b=d.next()}while(!b.done)})}};return a},'es6','es3');$jscomp.executeAsyncGenerator=function(a){function passValueToGenerator(b){return a.next(b)}function passErrorToGenerator(b){return a['throw'](b)}return new Promise(function(b,c){function handleGeneratorRecord(d){if(d.done){b(d.value)}else {Promise.resolve(d.value).then(passValueToGenerator,passErrorToGenerator).then(handleGeneratorRecord,c)}}handleGeneratorRecord(a.next())})};$jscomp.owns=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)};$jscomp.polyfill('WeakMap',function(c){function isConformant(){if(!c||!Object.seal){return !1}try{var b=Object.seal({});var d=Object.seal({});var a=new c([[b,2],[d,3]]);if(a.get(b)!=2||a.get(d)!=3){return !1}a['delete'](b);a.set(d,4);return !a.has(b)&&a.get(d)==4}catch(e){return !1}}if(isConformant()){return c}var a='$jscomp_hidden_'+Math.random().toString().substring(2);function insert(b){if(!$jscomp.owns(b,a)){var d={};$jscomp.defineProperty(b,a,{value:d})}}function patch(a){var b=Object[a];if(b){Object[a]=function(d){insert(d);return b(d)}}}patch('freeze');patch('preventExtensions');patch('seal');var d=0;var b=function(a){this.id_=(d+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var f=$jscomp.makeIterator(a);var b;while(!(b=f.next()).done){var e=b.value;this.set(e[0],e[1])}}};b.prototype.set=function(b,d){insert(b);if(!$jscomp.owns(b,a)){throw new Error('WeakMap key fail: '+b)}b[a][this.id_]=d;return this};b.prototype.get=function(b){return $jscomp.owns(b,a)?b[a][this.id_]:undefined};b.prototype.has=function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)};b.prototype['delete']=function(b){if(!$jscomp.owns(b,a)||!$jscomp.owns(b[a],this.id_)){return !1}return delete b[a][this.id_]};return b},'es6','es3');$jscomp.MapEntry=function(){this.previous;this.next;this.head;this.key;this.value};$jscomp.polyfill('Map',function(b){var g=!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!b||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=b;var e=Object.seal({x:4});var c=new b($jscomp.makeIterator([[e,'s']]));if(c.get(e)!='s'||c.size!=1||c.get({x:4})||c.set({x:4},'t')!=c||c.size!=2){return !1}var d=c.entries();var a=d.next();if(a.done||a.value[0]!=e||a.value[1]!='s'){return !1}a=d.next();if(a.done||a.value[0].x!=4||a.value[1]!='t'||!d.next().done){return !1}return !0}catch(j){return !1}}();if(g){return b}$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=new WeakMap();var a=function(a){this.data_={};this.head_=f();this.size=0;if(a){var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.set(d[0],d[1])}}};a.prototype.set=function(e,d){var a=c(this,e);if(!a.list){a.list=this.data_[a.id]=[]}if(!a.entry){a.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:e,value:d};a.list.push(a.entry);this.head_.previous.next=a.entry;this.head_.previous=a.entry;this.size++}else {a.entry.value=d}return this};a.prototype['delete']=function(d){var a=c(this,d);if(a.entry&&a.list){a.list.splice(a.index,1);if(!a.list.length){delete this.data_[a.id]}a.entry.previous.next=a.entry.next;a.entry.next.previous=a.entry.previous;a.entry.head=null;this.size--;return !0}return !1};a.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};a.prototype.has=function(a){return !!c(this,a).entry};a.prototype.get=function(d){var a=c(this,d).entry;return a&&a.value};a.prototype.entries=function(){return d(this,function(a){return [a.key,a.value]})};a.prototype.keys=function(){return d(this,function(a){return a.key})};a.prototype.values=function(){return d(this,function(a){return a.value})};a.prototype.forEach=function(e,d){var f=this.entries();var c;while(!(c=f.next()).done){var a=c.value;e.call(d,a[1],a[0],this)}};a.prototype[Symbol.iterator]=a.prototype.entries;var c=function(g,e){var f=i(e);var a=g.data_[f];if(a&&$jscomp.owns(g.data_,f)){for(var d=0;d<a.length;d++){var c=a[d];if(e!==e&&c.key!==c.key||e===c.key){return {id:f,list:a,index:d,entry:c}}}}return {id:f,list:a,index:-1,entry:undefined}};var d=function(c,d){var a=c.head_;return $jscomp.iteratorPrototype(function(){if(a){while(a.head!=c.head_){a=a.previous}while(a.next!=a.head){a=a.next;return {done:!1,value:d(a)}}a=null}return {done:!0,value:void 0}})};var f=function(){var a={};a.previous=a.next=a.head=a;return a};var h=0;var i=function(a){var c=a&&typeof a;if(c=='object'||c=='function'){a=a;if(!e.has(a)){var d=''+ ++h;e.set(a,d);return d}return e.get(a)}return 'p_'+a};return a},'es6','es3');$jscomp.polyfill('Math.acosh',function(a){if(a){return a}var b=function(b){b=Number(b);return Math.log(b+Math.sqrt(b*b-1))};return b},'es6','es3');$jscomp.polyfill('Math.asinh',function(a){if(a){return a}var b=function(b){b=Number(b);if(b===0){return b}var c=Math.log(Math.abs(b)+Math.sqrt(b*b+1));return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Math.log1p',function(a){if(a){return a}var b=function(b){b=Number(b);if(b<0.25&&b>-0.25){var f=b;var g=1;var c=b;var d=0;var e=1;while(d!=c){f*=b;e*=-1;c=(d=c)+e*f/++g}return c}return Math.log(1+b)};return b},'es6','es3');$jscomp.polyfill('Math.atanh',function(b){if(b){return b}var a=Math.log1p;var c=function(c){c=Number(c);return (a(c)-a(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.cbrt',function(a){if(a){return a}var b=function(b){if(b===0){return b}b=Number(b);var c=Math.pow(Math.abs(b),1/3);return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Math.clz32',function(a){if(a){return a}var b=function(b){b=Number(b)>>>0;if(b===0){return 32}var c=0;if((b&4.29490176E9)===0){b<<=16;c+=16}if((b&4.27819008E9)===0){b<<=8;c+=8}if((b&4.02653184E9)===0){b<<=4;c+=4}if((b&3.221225472E9)===0){b<<=2;c+=2}if((b&2.147483648E9)===0){c++}return c};return b},'es6','es3');$jscomp.polyfill('Math.cosh',function(a){if(a){return a}var b=Math.exp;var c=function(c){c=Number(c);return (b(c)+b(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.expm1',function(a){if(a){return a}var b=function(b){b=Number(b);if(b<0.25&&b>-0.25){var e=b;var f=1;var c=b;var d=0;while(d!=c){e*=b/++f;c=(d=c)+e}return c}return Math.exp(b)-1};return b},'es6','es3');$jscomp.polyfill('Math.hypot',function(a){if(a){return a}var b=function(c,d,h){c=Number(c);d=Number(d);var b,g,f;var e=Math.max(Math.abs(c),Math.abs(d));for(b=2;b<arguments.length;b++){e=Math.max(e,Math.abs(arguments[b]))}if(e>1.0E100||e<1.0E-100){c=c/e;d=d/e;f=c*c+d*d;for(b=2;b<arguments.length;b++){g=Number(arguments[b])/e;f+=g*g}return Math.sqrt(f)*e}else {f=c*c+d*d;for(b=2;b<arguments.length;b++){g=Number(arguments[b]);f+=g*g}return Math.sqrt(f)}};return b},'es6','es3');$jscomp.polyfill('Math.imul',function(a){if(a){return a}var b=function(b,c){b=Number(b);c=Number(c);var f=b>>>16&65535;var d=b&65535;var g=c>>>16&65535;var e=c&65535;var h=f*e+d*g<<16>>>0;return d*e+h|0};return b},'es6','es3');$jscomp.polyfill('Math.log10',function(a){if(a){return a}var b=function(b){return Math.log(b)/Math.LN10};return b},'es6','es3');$jscomp.polyfill('Math.log2',function(a){if(a){return a}var b=function(b){return Math.log(b)/Math.LN2};return b},'es6','es3');$jscomp.polyfill('Math.sign',function(a){if(a){return a}var b=function(b){b=Number(b);return b===0||isNaN(b)?b:b>0?1:-1};return b},'es6','es3');$jscomp.polyfill('Math.sinh',function(a){if(a){return a}var b=Math.exp;var c=function(c){c=Number(c);if(c===0){return c}return (b(c)-b(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.tanh',function(a){if(a){return a}var b=function(b){b=Number(b);if(b===0){return b}var c=Math.exp(-2*Math.abs(b));var d=(1-c)/(1+c);return b<0?-d:d};return b},'es6','es3');$jscomp.polyfill('Math.trunc',function(a){if(a){return a}var b=function(b){b=Number(b);if(isNaN(b)||b===Infinity||b===-Infinity||b===0){return b}var c=Math.floor(Math.abs(b));return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Number.EPSILON',function(a){return Math.pow(2,-52)},'es6','es3');$jscomp.polyfill('Number.MAX_SAFE_INTEGER',function(){return 9.007199254740991E15},'es6','es3');$jscomp.polyfill('Number.MIN_SAFE_INTEGER',function(){return -9.007199254740991E15},'es6','es3');$jscomp.polyfill('Number.isFinite',function(a){if(a){return a}var b=function(b){if(typeof b!=='number'){return !1}return !isNaN(b)&&b!==Infinity&&b!==-Infinity};return b},'es6','es3');$jscomp.polyfill('Number.isInteger',function(a){if(a){return a}var b=function(b){if(!Number.isFinite(b)){return !1}return b===Math.floor(b)};return b},'es6','es3');$jscomp.polyfill('Number.isNaN',function(a){if(a){return a}var b=function(b){return typeof b==='number'&&isNaN(b)};return b},'es6','es3');$jscomp.polyfill('Number.isSafeInteger',function(a){if(a){return a}var b=function(b){return Number.isInteger(b)&&Math.abs(b)<=Number.MAX_SAFE_INTEGER};return b},'es6','es3');$jscomp.polyfill('Object.assign',function(a){if(a){return a}var b=function(e,f){for(var d=1;d<arguments.length;d++){var b=arguments[d];if(!b){continue}for(var c in b){if($jscomp.owns(b,c)){e[c]=b[c]}}}return e};return b},'es6','es3');$jscomp.polyfill('Object.entries',function(a){if(a){return a}var b=function(c){var d=[];for(var b in c){if($jscomp.owns(c,b)){d.push([b,c[b]])}}return d};return b},'es8','es3');$jscomp.polyfill('Object.getOwnPropertySymbols',function(a){if(a){return a}return function(){return []}},'es6','es5');$jscomp.polyfill('Reflect.ownKeys',function(b){if(b){return b}var a='jscomp_symbol_';function isSymbol(c){return c.substring(0,a.length)==a}var c=function(e){var f=[];var c=Object.getOwnPropertyNames(e);var d=Object.getOwnPropertySymbols(e);for(var a=0;a<c.length;a++){(isSymbol(c[a])?d:f).push(c[a])}return f.concat(d)};return c},'es6','es5');$jscomp.polyfill('Object.getOwnPropertyDescriptors',function(a){if(a){return a}var b=function(e){var d={};var c=Reflect.ownKeys(e);for(var b=0;b<c.length;b++){d[c[b]]=Object.getOwnPropertyDescriptor(e,c[b])}return d};return b},'es8','es5');$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0};var a={};try{a.__proto__=b;return a.a}catch(c){}return !1};$jscomp.setPrototypeOf=typeof Object.setPrototypeOf=='function'?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b){throw new TypeError(a+' is not extensible')}return a}:null;$jscomp.polyfill('Object.setPrototypeOf',function(a){return a||$jscomp.setPrototypeOf},'es6','es5');$jscomp.polyfill('Object.values',function(a){if(a){return a}var b=function(b){var c=[];for(var d in b){if($jscomp.owns(b,d)){c.push(b[d])}}return c};return b},'es8','es3');$jscomp.polyfill('Reflect.apply',function(a){if(a){return a}var c=Function.prototype.apply;var b=function(e,d,b){return c.call(e,d,b)};return b},'es6','es3');$jscomp.objectCreate=$jscomp.ASSUME_ES5||typeof Object.create=='function'?Object.create:function(b){var a=function(){};a.prototype=b;return new a()};$jscomp.construct=function(){function reflectConstructWorks(){function Base(){}function Derived(){}new Base();Reflect.construct(Base,[],Derived);return new Base() instanceof Base}if(typeof Reflect!='undefined'&&Reflect.construct){if(reflectConstructWorks()){return Reflect.construct}var b=Reflect.construct;var a=function(e,d,a){var c=b(e,d);if(a){Reflect.setPrototypeOf(c,a.prototype)}return c};return a}function construct(b,d,a){if(a===undefined){a=b}var f=a.prototype||Object.prototype;var c=$jscomp.objectCreate(f);var e=Function.prototype.apply;var g=e.call(b,c,d);return g||c}return construct}();$jscomp.polyfill('Reflect.construct',function(a){return $jscomp.construct},'es6','es3');$jscomp.polyfill('Reflect.defineProperty',function(a){if(a){return a}var b=function(e,d,c){try{Object.defineProperty(e,d,c);var b=Object.getOwnPropertyDescriptor(e,d);if(!b){return !1}return b.configurable===(c.configurable||!1)&&b.enumerable===(c.enumerable||!1)&&('value' in b?b.value===c.value&&b.writable===(c.writable||!1):b.get===c.get&&b.set===c.set)}catch(f){return !1}};return b},'es6','es5');$jscomp.polyfill('Reflect.deleteProperty',function(a){if(a){return a}var b=function(c,b){if(!$jscomp.owns(c,b)){return !0}try{return delete c[b]}catch(d){return !1}};return b},'es6','es3');$jscomp.polyfill('Reflect.getOwnPropertyDescriptor',function(a){return a||Object.getOwnPropertyDescriptor},'es6','es5');$jscomp.polyfill('Reflect.getPrototypeOf',function(a){return a||Object.getPrototypeOf},'es6','es5');$jscomp.findDescriptor=function(d,c){var a=d;while(a){var b=Reflect.getOwnPropertyDescriptor(a,c);if(b){return b}a=Reflect.getPrototypeOf(a)}return undefined};$jscomp.polyfill('Reflect.get',function(a){if(a){return a}var b=function(d,c,e){if(arguments.length<=2){return d[c]}var b=$jscomp.findDescriptor(d,c);if(b){return b.get?b.get.call(e):b.value}return undefined};return b},'es6','es5');$jscomp.polyfill('Reflect.has',function(a){if(a){return a}var b=function(c,b){return b in c};return b},'es6','es3');$jscomp.polyfill('Reflect.isExtensible',function(a){if(a){return a}if($jscomp.ASSUME_ES5||typeof Object.isExtensible=='function'){return Object.isExtensible}return function(){return !0}},'es6','es3');$jscomp.polyfill('Reflect.preventExtensions',function(a){if(a){return a}if(!($jscomp.ASSUME_ES5||typeof Object.preventExtensions=='function')){return function(){return !1}}var b=function(b){Object.preventExtensions(b);return !Object.isExtensible(b)};return b},'es6','es3');$jscomp.polyfill('Reflect.set',function(a){if(a){return a}var b=function(b,d,e,f){var c=$jscomp.findDescriptor(b,d);if(!c){if(Reflect.isExtensible(b)){b[d]=e;return !0}return !1}if(c.set){c.set.call(arguments.length>3?f:b,e);return !0}else {if(c.writable&&!Object.isFrozen(b)){b[d]=e;return !0}}return !1};return b},'es6','es5');$jscomp.polyfill('Reflect.setPrototypeOf',function(a){if(a){return a}else {if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;var c=function(c,d){try{b(c,d);return !0}catch(e){return !1}};return c}else {return null}}},'es6','es5');$jscomp.polyfill('Set',function(b){var c=!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!b||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=b;var d=Object.seal({x:4});var c=new b($jscomp.makeIterator([d]));if(!c.has(d)||c.size!=1||c.add(d)!=c||c.size!=1||c.add({x:4})!=c||c.size!=2){return !1}var e=c.entries();var a=e.next();if(a.done||a.value[0]!=d||a.value[1]!=d){return !1}a=e.next();if(a.done||a.value[0]==d||a.value[0].x!=4||a.value[1]!=a.value[0]){return !1}return e.next().done}catch(f){return !1}}();if(c){return b}$jscomp.initSymbol();$jscomp.initSymbolIterator();var a=function(a){this.map_=new Map();if(a){var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.add(d)}}this.size=this.map_.size};a.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};a.prototype['delete']=function(c){var a=this.map_['delete'](c);this.size=this.map_.size;return a};a.prototype.clear=function(){this.map_.clear();this.size=0};a.prototype.has=function(a){return this.map_.has(a)};a.prototype.entries=function(){return this.map_.entries()};a.prototype.values=function(){return this.map_.values()};a.prototype.keys=a.prototype.values;a.prototype[Symbol.iterator]=a.prototype.values;a.prototype.forEach=function(c,a){var d=this;this.map_.forEach(function(e){return c.call(a,e,e,d)})};return a},'es6','es3');$jscomp.checkStringArgs=function(a,c,b){if(a==null){throw new TypeError("The 'this' value for String.prototype."+b+' must not be null or undefined')}if(c instanceof RegExp){throw new TypeError('First argument to String.prototype.'+b+' must not be a regular expression')}return a+''};$jscomp.polyfill('String.prototype.codePointAt',function(a){if(a){return a}var b=function(b){var e=$jscomp.checkStringArgs(this,null,'codePointAt');var f=e.length;b=Number(b)||0;if(!(b>=0&&b<f)){return void 0}b=b|0;var c=e.charCodeAt(b);if(c<55296||c>56319||b+1===f){return c}var d=e.charCodeAt(b+1);if(d<56320||d>57343){return c}return (c-55296)*1024+d+9216};return b},'es6','es3');$jscomp.polyfill('String.prototype.endsWith',function(a){if(a){return a}var b=function(b,c){var d=$jscomp.checkStringArgs(this,b,'endsWith');b=b+'';if(c===void 0){c=d.length}var f=Math.max(0,Math.min(c|0,d.length));var e=b.length;while(e>0&&f>0){if(d[--f]!=b[--e]){return !1}}return e<=0};return b},'es6','es3');$jscomp.polyfill('String.fromCodePoint',function(a){if(a){return a}var b=function(e){var c='';for(var d=0;d<arguments.length;d++){var b=Number(arguments[d]);if(b<0||b>1114111||b!==Math.floor(b)){throw new RangeError('invalid_code_point '+b)}if(b<=65535){c+=String.fromCharCode(b)}else {b-=65536;c+=String.fromCharCode(b>>>10&1023|55296);c+=String.fromCharCode(b&1023|56320)}}return c};return b},'es6','es3');$jscomp.polyfill('String.prototype.includes',function(a){if(a){return a}var b=function(b,c){var d=$jscomp.checkStringArgs(this,b,'includes');return d.indexOf(b,c||0)!==-1};return b},'es6','es3');$jscomp.polyfill('String.prototype.repeat',function(a){if(a){return a}var b=function(b){var c=$jscomp.checkStringArgs(this,null,'repeat');if(b<0||b>1342177279){throw new RangeError('Invalid count value')}b=b|0;var d='';while(b){if(b&1){d+=c}if(b>>>=1){c+=c}}return d};return b},'es6','es3');$jscomp.stringPadding=function(c,a){var b=c!==undefined?String(c):' ';if(!(a>0)||!b){return ''}var d=Math.ceil(a/b.length);return b.repeat(d).substring(0,a)};$jscomp.polyfill('String.prototype.padEnd',function(a){if(a){return a}var b=function(d,c){var b=$jscomp.checkStringArgs(this,null,'padStart');var e=d-b.length;return b+$jscomp.stringPadding(c,e)};return b},'es8','es3');$jscomp.polyfill('String.prototype.padStart',function(a){if(a){return a}var b=function(d,c){var b=$jscomp.checkStringArgs(this,null,'padStart');var e=d-b.length;return $jscomp.stringPadding(c,e)+b};return b},'es8','es3');$jscomp.polyfill('String.prototype.startsWith',function(a){if(a){return a}var b=function(b,g){var c=$jscomp.checkStringArgs(this,b,'startsWith');b=b+'';var h=c.length;var e=b.length;var f=Math.max(0,Math.min(g|0,c.length));var d=0;while(d<e&&f<h){if(c[f++]!=b[d++]){return !1}}return d>=e};return b},'es6','es3');$jscomp.arrayFromIterator=function(c){var b;var a=[];while(!(b=c.next()).done){a.push(b.value)}return a};$jscomp.arrayFromIterable=function(a){if(a instanceof Array){return a}else {return $jscomp.arrayFromIterator($jscomp.makeIterator(a))}};$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var e=$jscomp.setPrototypeOf;e(a,b)}else {for(var c in b){if(c=='prototype'){continue}if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);if(d){Object.defineProperty(a,c,d)}}else {a[c]=b[c]}}}a.superClass_=b.prototype};$jscomp.polyfill('WeakSet',function(b){function isConformant(){if(!b||!Object.seal){return !1}try{var c=Object.seal({});var d=Object.seal({});var a=new b([c]);if(!a.has(c)||a.has(d)){return !1}a['delete'](c);a.add(d);return !a.has(c)&&a.has(d)}catch(e){return !1}}if(isConformant()){return b}var a=function(a){this.map_=new WeakMap();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.add(d)}}};a.prototype.add=function(a){this.map_.set(a,!0);return this};a.prototype.has=function(a){return this.map_.has(a)};a.prototype['delete']=function(a){return this.map_['delete'](a)};return a},'es6','es3');try{if(Array.prototype.values.toString().indexOf('[native code]')==-1){delete Array.prototype.values}}catch(a){}Ext.define('SU.dbproxies.overrides.ext.data.Model',{override:'Ext.data.Model',inheritableStatics:{getProxy:function(){var b=this,a=b.proxy,d=b.defaultProxy,c;if(!a){a=b.proxyConfig;if(!a&&d){a=d}if(!a||!a.isProxy){if(typeof a==='string'){a={type:a}}if(a&&a.type==='dynamic'){a=SU.dbproxies.data.proxy.Dynamic.applyDynamicProxy(a)}c=b.schema.constructProxy(b);a=a?Ext.merge(c,a):c}a=b.setProxy(a)}return a}}});Ext.define('SU.dbproxies.config.Config',{singleton:!0,dbName:'extjs',dbDescription:'extjs',dbVersion:'1.0',dbSize:5000000});Ext.define('SU.dbproxies.data.SqlConnection',{singleton:!0,requires:['SU.dbproxies.config.Config'],getConn:function(){if(!Ext.isDefined(this.conn)){if(window.sqlitePlugin){this.conn=window.sqlitePlugin.openDatabase({name:SU.dbproxies.config.Config.dbName+'.db',location:'default'})}else {this.conn=window.openDatabase(SU.dbproxies.config.Config.dbName,SU.dbproxies.config.Config.dbVersion,SU.dbproxies.config.Config.dbDescription,SU.dbproxies.config.Config.dbSize)}}return this.conn}});Ext.define('SU.dbproxies.data.proxy.Db',{extend:'Ext.data.proxy.Client',config:{cloud:!1,implicitFields:!1},setException:function(a,b){a.setException(b)}});Ext.define('SU.dbproxies.data.proxy.Dynamic',{extend:'Ext.data.proxy.Proxy',config:{allConfig:{},proxies:[]},statics:{applyDynamicProxy:function(d){var g=d.allConfig||{},e=d.proxies||[],h=e.length,c,b,f=[],a;for(c=0;c<h;c+=1){a=e[c];if(typeof a==='string'){a={type:a}}b=Ext.ClassManager.getByAlias('proxy.'+a.type);f.push(a.type);if(!b){console.warn('Dynamic proxy: proxy type not defined ('+a.type+')');continue}if(Ext.isFunction(b.isSupported)&&!b.isSupported()){continue}return Ext.applyIf(a,g)}console.warn('Dynamic proxy: no supported proxies found: tried '+f.join(', '));return !1}}});Ext.define('SU.dbproxies.data.proxy.IndexedDB',{alias:'proxy.indexeddb',extend:'SU.dbproxies.data.proxy.Db',isIndexedDBProxy:!0,config:{dbName:null,indices:[]},statics:{isSupported:function(){return !!window.indexedDB}},updateModel:function(b){var a;var c;if(b){a=b.prototype.entityName;c=a.slice(a.lastIndexOf('.')+1);if(!this.getDbName()){this.setDbName(c)}this.idProp=b.prototype.getIdProperty()}this.callParent(arguments)},deleteDb:function(a,b){this.ensureDb({},function(){indexedDB.deleteDatabase(this.getDbName());Ext.callback(a,b)},this)},ensureDb:function(d,b,c){if(this.db){Ext.callback(b,c);return}var a=indexedDB.open(this.getDbName(),1);a.onsuccess=Ext.bind(this.openDbSuccess,this,[a,b,c],!1);a.onerror=Ext.bind(this.openDbError,this,[d,b,c],!0);a.onupgradeneeded=Ext.bind(this.openDbSetSchema,this,[a,b,c],!1)},openDbSuccess:function(b,a,c){this.db=b.result;Ext.callback(a,c)},openDbError:function(c){var b=arguments;var a=b[b.length-3];console.error('open indexeddb error: ',c.target.error);Ext.callback(a.callback,a.scope,[!1,'indexed db open error: '+c.target.error])},openDbSetSchema:function(e){var f=e.result.createObjectStore(this.getDbName(),{keyPath:this.idProp});var a;var d;var c=this.getIndices();var b;for(a=0,d=c.length;a<d;a+=1){b=c[a];f.createIndex(b,b,{unique:!1})}},getIndexFromFilters:function(a,c){if(!a||a.length!==1){return !1}var d=a[0];var b=d.getProperty();var f=d.getValue();var e=this.getIndices();if(!Ext.Array.contains(e,b)){return !1}c.index_value=f;return c.object_store.index(b)},getDbTx:function(f,a,b,d){var c=b||Ext.emptyFn;var e=d||{};this.ensureDb(a,Ext.bind(this.getDbTxWithDb,this,[f,a,c,e],!1))},getDbTxWithDb:function(e,c,b,d){var a=this.db.transaction([this.getDbName()],e);a.onerror=Ext.bind(this.transactionError,this,[c],!0);Ext.callback(b,d,[a])},transactionError:function(b,a){var c=arguments;console.error('indexeddb proxy transaction error: ',b.target.error);this.setException(a.operation,b.target.error);if(a.callback){Ext.callback(a.callback,a.scope,[a.operation])}},getRecordData:function(a){var f=a.getFields();var d={};var c;var e=[];var b;Ext.each(f,function(b){c=b.name;e.push(c);if(!Ext.isDefined(b.persist)||b.persist){d[c]=a.get(c)}},this);if(this.getImplicitFields()){for(b in a.data){if(!Ext.Array.contains(e,b)){d[b]=a.data[b]}}}return d},create:function(a){var b={operation:a,records:a.getRecords()};a.setStarted();this.getDbTx('readwrite',b,Ext.bind(this.createTransaction,this,[b],!0))},createTransaction:function(c){var b=arguments;var a=b[b.length-1];Ext.apply(a,{tx:c,object_store:c.objectStore(this.getDbName()),resultSet:new Ext.data.ResultSet({success:!0}),totalRecords:a.records.length,executedRecords:0,errors:[]});Ext.each(a.records,Ext.bind(this.createRecord,this,[a],!0))},createRecord:function(b,g,e,a){if(!b.phantom){a.executedRecords+=1;this.createRecordCallback(a);return}var f=b.getId();var d=this.getRecordData(b);var c=a.object_store.add(d);c.onsuccess=Ext.bind(this.createRecordSuccess,this,[a,b,d],!0);c.onerror=Ext.bind(this.createRecordError,this,[a,b],!0)},createRecordSuccess:function(d,b,a,c){if(this.getCloud()&&a.session){a.session.addOperation({model:a.get('model'),record_id:a.getId(),type:'create',fields:c})}b.executedRecords+=1;a.phantom=!1;a.commit();this.createRecordCallback(b)},createRecordError:function(b,a,c){console.error('INSERT ERROR:',b);a.executedRecords+=1;a.errors.push({clientId:c.getId(),error:b});this.createRecordCallback(a)},createRecordCallback:function(a){if(a.executedRecords===a.totalRecords){this.createComplete(a)}},createComplete:function(a){if(a.operation.process(a.resultSet)===!1){this.fireEvent('exception',this,a.operation)}if(a.errors){a.operation.setException(a.errors)}},erase:function(a,d,e){var b=[];var c={operation:a,callback:d||Ext.emptyFn,scope:e||{},records:a.getRecords(),erasedRecords:b,resultSet:new Ext.data.ResultSet({records:b,success:!0})};a.setStarted();this.getDbTx('readwrite',c,Ext.bind(this.eraseTransaction,this,[c],!0))},eraseTransaction:function(b){var c=arguments;var a=c[c.length-1];b.oncomplete=Ext.bind(this.eraseTransactionSuccess,this,[a],!0);Ext.apply(a,{tx:b,object_store:b.objectStore(this.getDbName()),errors:[]});Ext.each(a.records,Ext.bind(this.eraseRecord,this,[a],!0))},eraseRecord:function(b,e,d,a){var c=a.object_store['delete'](b.getId());c.onsuccess=Ext.bind(this.eraseRecordSuccess,this,[a,b],!0);c.onerror=Ext.bind(this.eraseRecordError,this,[a,b],!0)},eraseRecordSuccess:function(c,b,a){if(this.getCloud()&&a.session){a.session.addOperation({model:a.get('model'),record_id:a.getId(),type:'delete'})}b.erasedRecords.push(a)},eraseRecordError:function(a,b,c){console.error('ERASE ERROR:',a.target.error);b.errors.push({clientId:c.getId(),error:a.target.error})},eraseTransactionSuccess:function(){var b=arguments;var a=b[b.length-1];if(a.operation.process(a.resultSet)===!1){this.fireEvent('exception',this,a.operation)}if(a.errors.length){a.operation.setException(a.errors.join(', '))}Ext.callback(a.callback,a.scope,[a.operation])},read:function(a,c,d){var b={operation:a,callback:c||Ext.emptyFn,scope:d||{}};a.setStarted();this.getDbTx('readonly',b,Ext.bind(this.readTransaction,this,[b],!0))},readTransaction:function(e){var d=arguments;var a=d[d.length-1];var b=[];var c=a.operation.getParams()||{};Ext.apply(c,{page:a.operation.getPage(),start:a.operation.getStart(),limit:a.operation.getLimit(),sorters:a.operation.getSorters(),filters:a.operation.getFilters(),recordId:a.operation.getId()});Ext.apply(a,{tx:e,object_store:e.objectStore(this.getDbName()),idProperty:this.getModel().prototype.getIdProperty(),recordCreator:a.operation.getRecordCreator(),params:c,records:b,resultSet:new Ext.data.ResultSet({records:b,success:!0}),errors:[]});a.tx.onerror=Ext.bind(this.readQueryError,this,[a],!0);if(a.params.recordId){this.readRecordFromId(a)}else {this.readRecordsFromParams(a)}},readRecordFromId:function(a){var b=a.object_store.get(a.params.recordId);b.onsuccess=Ext.bind(this.readRecordFromIdSuccess,this,[b,a],!1)},readRecordFromIdSuccess:function(b,a){this.readSuccess([b.result],a)},readRecordsFromParams:function(a){var b=this.getIndexFromFilters(a.params.filters,a);if(b){a.params.filters=[];a.idb_getfrom=b}else {a.idb_getfrom=a.object_store}if(a.idb_getfrom.getAll){this.readAllRecordsGetAll(a,Ext.bind(this.readSuccess,this,[a],!0))}else {this.readAllRecordsCursor(a,Ext.bind(this.readSuccess,this,[a],!0))}},readAllRecordsGetAll:function(a,c,e){var d=c||Ext.emptyFn;var f=e||{};var g=[];var b;if(a.index_value){b=a.idb_getfrom.getAll(a.index_value)}else {b=a.idb_getfrom.getAll()}b.onsuccess=Ext.bind(this.readAllRecordsGetAllSuccess,this,[a,d,f],!0)},readAllRecordsGetAllSuccess:function(c,d,a,b){Ext.callback(a,b,[c.target.result])},readAllRecordsCursor:function(a,c,e){var d=c||Ext.emptyFn;var g=e||{};var f=[];var b;if(a.index_value){b=a.idb_getfrom.openCursor(IDBKeyRange.only(a.index_value))}else {b=a.idb_getfrom.openCursor()}b.onsuccess=Ext.bind(this.readAllRecordsOnCursor,this,[f,a,d,g],!0)},readAllRecordsOnCursor:function(e,b,f,c,d){var a=e.target.result;if(a){b.push(a.value);a['continue']()}else {Ext.callback(c,d,[b])}},readSuccess:function(n,a){var o=this.getModel();var m=n.length;var b;var j;var f;var c;var h;var p;var g;var e;var k=0;var i;var l;var d;for(b=0;b<m;b+=1){j=n[b];a.records.push(Ext.isFunction(a.recordCreator)?a.recordCreator(j,o):new o(j))}if(!a.params.recordId){f=a.params.sorters;c=a.params.filters;h=a.params.limit;p=a.params.start;e=a.records;a.records=[];if(f){Ext.Array.sort(e,Ext.util.Sorter.createComparator(f))}for(b=p||0;b<m;b++){g=e[b];i=!0;if(c){for(d=0,l=c.length;d<l;d++){i=c[d].filter(g)}}if(i){a.records.push(g);k++}if(h&&k===h){break}}}a.resultSet.setSuccess(!0);a.resultSet.setTotal(a.records.length);a.resultSet.setCount(a.records.length);this.readComplete(a)},readQueryError:function(b,a){console.error('READ ERROR:',b.target.error);a.errors.push(b.target.error);a.resultSet.setSuccess(!1);a.resultSet.setTotal(0);a.resultSet.setCount(0);this.readComplete(a)},readComplete:function(a){if(a.operation.process(a.resultSet)===!1){this.fireEvent('exception',this,a.operation)}if(a.errors){a.operation.setException(a.errors)}Ext.callback(a.callback,a.scope,[a.operation])},update:function(a,c,d){var b={operation:a,callback:c||Ext.emptyFn,scope:d||{},records:a.getRecords()};a.setStarted();this.getDbTx('readwrite',b,Ext.bind(this.updateTransaction,this,[b],!0))},updateTransaction:function(d){var c=arguments;var a=c[c.length-1];var b=[];Ext.apply(a,{tx:d,object_store:d.objectStore(this.getDbName()),updatedRecords:b,resultSet:new Ext.data.ResultSet({records:b,success:!0}),totalRecords:a.records.length,executedRecords:0,errors:[]});Ext.each(a.records,Ext.bind(this.updateRecord,this,[a],!0))},updateRecord:function(a,i,g,c){var h=a.getId();var b=this.getRecordData(a);var e=c.object_store.put(b);var d={};var f=Ext.isObject(a.modified)?Ext.Object.getKeys(a.modified):[];Ext.each(f,function(e){if(Ext.isDefined(b[e])){d[e]=b[e]}},this);e.onsuccess=Ext.bind(this.updateRecordSuccess,this,[c,a,b,d],!0);e.onerror=Ext.bind(this.updateRecordError,this,[c,a],!0)},updateRecordSuccess:function(h,b,a,g,d){var e=a.getId();var c;var f=a.get('model');if(this.getCloud()&&a.session){for(c in d){a.session.addOperation({model:f,record_id:e,type:'update',field:c,value:d[c]})}}b.updatedRecords.push(g);b.executedRecords+=1;this.updateRecordCallback(b)},updateRecordError:function(c,a,b){console.error('UPDATE ERROR:',c.target.error);a.executedRecords+=1;a.errors.push({clientId:b.getId(),error:error});this.updateRecordCallback(a)},updateRecordCallback:function(a){if(a.executedRecords===a.totalRecords){this.updateComplete(a)}},updateComplete:function(a){if(a.operation.process(a.resultSet)===!1){this.fireEvent('exception',this,a.operation)}if(a.errors){a.operation.setException(a.errors)}Ext.callback(a.callback,a.scope,[a.operation])}});Ext.define('SU.dbproxies.data.proxy.Sql',{alias:'proxy.sql',extend:'SU.dbproxies.data.proxy.Db',requires:['SU.dbproxies.data.SqlConnection'],isSQLProxy:!0,config:{tableName:null,defaultDateFormat:'Y-m-d H:i:s.u',implicitFieldsColName:'implicit'},statics:{isSupported:function(){return !!window.openDatabase}},getDatabaseObject:function(){return SU.dbproxies.data.SqlConnection.getConn()},updateModel:function(a){var b;var c;var d;if(a){b=a.prototype.entityName;c=this.getDefaultDateFormat();d=b.slice(b.lastIndexOf('.')+1);Ext.each(a.getFields(),function(b){if(b.getType().type==='date'&&!b.getDateFormat()){b.setDateFormat(c)}},this);if(!this.getTableName()){this.setTableName(d)}this.columns=this.getPersistedModelColumns(a)}this.callParent(arguments)},createTable:function(a){a.executeSql(['CREATE TABLE IF NOT EXISTS ',this.getTableName(),' (',this.getSchemaString(),')'].join(''));this.tableExists=!0},getColumnValues:function(c,f){var g=c.length,e=[],a,d,b;for(a=0;a<g;a++){d=c[a];b=f[d];if(b!==undefined){e.push(b)}}return e},getPersistedModelColumns:function(e){var d=e.getFields().items;var c=[];var g=d.length;var b;var a;var f;for(b=0;b<g;b++){a=d[b];f=a.getName();if(a.getPersist()){c.push(a.getName())}}if(this.getImplicitFields()){c.push(this.getImplicitFieldsColName())}return c},readDate:function(c,a){if(Ext.isEmpty(a)){return null}if(Ext.isDate(a)){return a}var b=c.getDateFormat()||this.getDefaultDateFormat();switch(b){case 'timestamp':return Ext.Date.parse(a,'timestamp');case 'time':return Ext.Date.parse(a,'time');default:return Ext.Date.parse(a,'time');}},writeDate:function(c,a){if(Ext.isEmpty(a)){return null}var b=c.getDateFormat()||this.getDefaultDateFormat();switch(b){case 'timestamp':return a.getTime()/1000;case 'time':return a.getTime();default:return a.getTime();}},dropTable:function(c){var a=this;var d=a.getTableName();var b=c?c.callback:null;var e=c?c.scope||a:null;var f=a.getDatabaseObject();f.transaction(function(a){a.executeSql('DROP TABLE '+d)},function(g,f){if(typeof b=='function'){b.call(e||a,!1,d,f)}},function(f){if(typeof b=='function'){b.call(e||a,!0,d)}});a.tableExists=!1},getSchemaString:function(){var c=[];var i=this.getModel();var f=i.prototype.getIdProperty();var h=i.getFields().items;var j=h.length;var d;var a;var b;var e;var g;for(d=0;d<j;d++){a=h[d];if(!a.type){continue}b=a.type;e=a.name;g=a.persist;if(!g){continue}b=this.convertToSqlType(b);if(e===f){c.unshift(f+' '+b+' PRIMARY KEY')}else {c.push(e+' '+b)}}if(this.getImplicitFields()){c.push(this.getImplicitFieldsColName()+' TEXT')}return c.join(', ')},decodeRecordData:function(b){var a;var c={};var e=this.getModel().getFields().items;var d={};Ext.each(e,function(a){d[a.getName()]=a.type});for(a in b){if(Ext.isDefined(d[a])&&d[a]=='auto'&&Ext.isString(b[a])&&Ext.Array.contains(['[','{'],b[a][0])){if(Ext.isEmpty(b[a])){c[a]=null}else {c[a]=Ext.decode(b[a])}}else {if(a===this.getImplicitFieldsColName()){Ext.apply(c,Ext.JSON.decode(b[a]))}else {c[a]=b[a]}}}return c},getRecordData:function(c){var i=c.getFields();var e={};var f;var a;var b;var g=[];var h={};var d;Ext.each(i,function(d){g.push(d.name);if(!Ext.isDefined(d.persist)||d.persist){f=d.name;a=c.get(f);if(d.type=='date'){b=this.writeDate(d,a)}else {if(!Ext.isDefined(a)){b=''}else {if(d.type=='auto'&&(Ext.isObject(a)||Ext.isArray(a))){if(Ext.isEmpty(a)){b=''}else {b=Ext.encode(a)}}else {b=a}}}e[f]=b}},this);if(this.getImplicitFields()){for(d in c.data){if(!Ext.Array.contains(g,d)){h[d]=c.data[d]}}e[this.getImplicitFieldsColName()]=Ext.JSON.encode(h)}return e},convertToSqlType:function(a){switch(a.toLowerCase()){case 'date':case 'string':case 'array':case 'object':case 'auto':return 'TEXT';case 'int':case 'integer':return 'INTEGER';case 'float':return 'REAL';case 'bool':case 'boolean':return 'NUMERIC';}},transactionError:function(d,c){var b=arguments;var a=b[b.length-1];console.error('sql proxy transaction error: ',arguments);this.setException(a.operation,c);if(a.callback){Ext.callback(a.callback,a.scope,[a.operation])}},create:function(a){var b={operation:a,records:a.getRecords()};a.setStarted();this.getDatabaseObject().transaction(Ext.bind(this.createTransaction,this,[b],!0),Ext.bind(this.transactionError,this,[b],!0))},createTransaction:function(g){var d=arguments;var a=d[d.length-1];var e=[];var b;var f;var c;if(!this.tableExists){this.createTable(g)}for(b=0,f=this.columns.length;b<f;b++){e.push('?')}c=e.join(', ');Ext.apply(a,{tx:g,resultSet:new Ext.data.ResultSet({success:!0}),table:this.getTableName(),columns:this.columns,totalRecords:a.records.length,executedRecords:0,errors:[],placeholders:c});Ext.each(a.records,Ext.bind(this.createRecord,this,[a],!0))},createRecord:function(b,g,e,a){if(!b.phantom){a.executedRecords+=1;this.createRecordCallback(a);return}var f=b.getId();var c=this.getRecordData(b);var d=this.getColumnValues(a.columns,c);a.tx.executeSql(['INSERT INTO ',a.table,' (',a.columns.join(', '),')',' VALUES (',a.placeholders,')'].join(''),d,Ext.bind(this.createRecordSuccess,this,[a,b,c],!0),Ext.bind(this.createRecordError,this,[a,b],!0))},createRecordSuccess:function(e,d,c,a,b){b=this.decodeRecordData(b);if(this.getCloud()&&a.session){a.session.addOperation({model:a.get('model'),record_id:a.getId(),type:'create',fields:b})}c.executedRecords+=1;a.phantom=!1;a.commit();this.createRecordCallback(c)},createRecordError:function(d,b,a,c){console.error('INSERT ERROR:',b);a.executedRecords+=1;a.errors.push({clientId:c.getId(),error:b});this.createRecordCallback(a)},createRecordCallback:function(a){if(a.executedRecords===a.totalRecords){this.createComplete(a)}},createComplete:function(a){if(a.operation.process(a.resultSet)===!1){this.fireEvent('exception',this,a.operation)}if(a.errors){a.operation.setException(a.errors)}},erase:function(a,d,e){var c=[];var b={operation:a,callback:d||Ext.emptyFn,scope:e||{},records:a.getRecords(),erasedRecords:c,resultSet:new Ext.data.ResultSet({records:c,success:!0})};a.setStarted();this.getDatabaseObject().transaction(Ext.bind(this.eraseTransaction,this,[b],!0),Ext.bind(this.transactionError,this,[b],!0),Ext.bind(this.eraseTransactionSuccess,this,[b],!0))},eraseTransaction:function(c){var b=arguments;var a=b[b.length-1];if(!this.tableExists){this.createTable(c)}Ext.apply(a,{tx:c,idProperty:this.getModel().prototype.getIdProperty(),table:this.getTableName(),errors:[]});Ext.each(a.records,Ext.bind(this.eraseRecord,this,[a],!0))},eraseRecord:function(b,d,c,a){a.tx.executeSql(['DELETE FROM ',a.table,' WHERE ',a.idProperty,' = ?'].join(''),[b.getId()],Ext.bind(this.eraseRecordSuccess,this,[a,b],!0),Ext.emptyFn)},eraseRecordSuccess:function(d,c,b,a){if(this.getCloud()&&a.session){a.session.addOperation({model:a.get('model'),record_id:a.getId(),type:'delete'})}b.erasedRecords.push(a)},eraseTransactionSuccess:function(){var b=arguments;var a=b[b.length-1];if(a.operation.process(a.resultSet)===!1){this.fireEvent('exception',this,a.operation)}if(a.error){a.operation.setException(a.error)}Ext.callback(a.callback,a.scope,[a.operation])},read:function(a,c,d){var b={operation:a,callback:c||Ext.emptyFn,scope:d||{}};a.setStarted();this.getDatabaseObject().transaction(Ext.bind(this.readTransaction,this,[b],!0),Ext.bind(this.transactionError,this,[b],!0))},readTransaction:function(g){var f=arguments;var a=f[f.length-1];var d=[];var b=[];var c;var e=a.operation.getParams()||{};if(!this.tableExists){this.createTable(g)}Ext.apply(e,{page:a.operation.getPage(),start:a.operation.getStart(),limit:a.operation.getLimit(),sorters:a.operation.getSorters(),filters:a.operation.getFilters(),recordId:a.operation.getId()});Ext.apply(a,{tx:g,idProperty:this.getModel().prototype.getIdProperty(),recordCreator:a.operation.getRecordCreator(),params:e,records:d,resultSet:new Ext.data.ResultSet({records:d,success:!0}),table:this.getTableName(),errors:[]});if(a.params.recordId){c=this.readFromIdBuildQuery(a,b)}else {c=this.readMultipleBuildQuery(a,b)}a.tx.executeSql(c,b,Ext.bind(this.readQuerySuccess,this,[a],!0),Ext.bind(this.readQueryError,this,[a],!0))},readQuerySuccess:function(h,g,a){var f=g.rows;var c=f.length;var b;var d;var e=this.getModel();for(b=0;b<c;b+=1){d=this.decodeRecordData(f.item(b));a.records.push(Ext.isFunction(a.recordCreator)?a.recordCreator(d,e):new e(d))}a.resultSet.setSuccess(!0);a.resultSet.setTotal(c);a.resultSet.setCount(c);this.readComplete(a)},readQueryError:function(c,b,a){console.error('READ ERROR:',b);a.errors.push(b);a.resultSet.setSuccess(!1);a.resultSet.setTotal(0);a.resultSet.setCount(0)},readFromIdBuildQuery:function(a,b){b.push(a.params.recordId);return ['SELECT * FROM ',a.table,' WHERE ',a.idProperty,' = ?'].join('')},readMultipleBuildQuery:function(a,i){var f;var b;var d;var g;var c;var h;var e=['SELECT * FROM ',a.table].join('');if(a.params.filters&&a.params.filters.length){f=a.params.filters.length;for(b=0;b<f;b+=1){d=a.params.filters[b];c=d.getProperty();h=d.getValue();if(c!==null){e+=[b===0?' WHERE ':' AND ',c,' ',d.getAnyMatch()?"LIKE '%"+h+"%'":'= ?'].join('');if(!d.getAnyMatch()){i.push(h)}}}}if(a.params.sorters&&a.params.sorters.length){f=a.params.sorters.length;for(b=0;b<f;b+=1){g=a.params.sorters[b];c=g.getProperty();if(c!==null){e+=[b===0?' ORDER BY ':', ',c,' ',g.getDirection()].join('')}}}if(Ext.isDefined(a.params.page)){e+=[' LIMIT '+parseInt(a.params.start,10)+', '+parseInt(a.params.limit,10)].join('')}return e},readComplete:function(a){if(a.operation.process(a.resultSet)===!1){this.fireEvent('exception',this,a.operation)}if(a.errors){a.operation.setException(a.errors)}Ext.callback(a.callback,a.scope,[a.operation])},update:function(a,c,d){var b={operation:a,callback:c||Ext.emptyFn,scope:d||{},records:a.getRecords()};a.setStarted();this.getDatabaseObject().transaction(Ext.bind(this.updateTransaction,this,[b],!0),Ext.bind(this.transactionError,this,[b],!0))},updateTransaction:function(d){var c=arguments;var a=c[c.length-1];var b=[];if(!this.tableExists){this.createTable(d)}Ext.apply(a,{tx:d,idProperty:this.getModel().prototype.getIdProperty(),updatedRecords:b,resultSet:new Ext.data.ResultSet({records:b,success:!0}),table:this.getTableName(),columns:this.columns,totalRecords:a.records.length,executedRecords:0,errors:[]});Ext.each(a.records,Ext.bind(this.updateRecord,this,[a],!0))},updateRecord:function(a,s,r,b){var q=a.getId();var i=this.getRecordData(a);var p=this.getColumnValues(b.columns,i);var h=[];var g=[];var d;var m=Ext.isObject(a.modified)?Ext.Object.getKeys(a.modified):[];var f={};var n;var e;var o=a.getFields();var j=[];var c;var l={};var k=!1;for(e=0,n=b.columns.length;e<n;e++){d=b.columns[e];if(!Ext.Array.contains(m,d)){continue}g.push(d+' = ?');h.push(p[e]);f[d]=a.data[d]}if(this.getImplicitFields()){Ext.each(o,function(c){j.push(c.name)},this);for(c in a.data){if(Ext.Array.contains(j,c)){continue}l[c]=a.data[c];if(!Ext.Array.contains(m,c)){continue}k=!0;f[c]=a.data[c]}}if(k){g.push(this.getImplicitFieldsColName()+' = ?');h.push(Ext.JSON.encode(l))}if(!g.length){this.updateRecordSuccess(b.tx,null,b,a,i,f);return}b.tx.executeSql(['UPDATE ',b.table,' SET ',g.join(', '),' WHERE ',b.idProperty,' = ?'].join(''),h.concat(q),Ext.bind(this.updateRecordSuccess,this,[b,a,i,f],!0),Ext.bind(this.updateRecordError,this,[b,a],!0))},updateRecordSuccess:function(i,h,b,a,c,e){var f=a.getId();var d;var g=a.get('model');if(this.getCloud()&&a.session){for(d in e){a.session.addOperation({model:g,record_id:f,type:'update',field:d,value:e[d]})}}c=this.decodeRecordData(c);b.updatedRecords.push(c);b.executedRecords+=1;this.updateRecordCallback(b)},updateRecordError:function(d,b,a,c){console.error('UPDATE ERROR:',b);a.executedRecords+=1;a.errors.push({clientId:c.getId(),error:b});this.updateRecordCallback(a)},updateRecordCallback:function(a){if(a.executedRecords===a.totalRecords){this.updateComplete(a)}},updateComplete:function(a){if(a.operation.process(a.resultSet)===!1){this.fireEvent('exception',this,a.operation)}if(a.errors){a.operation.setException(a.errors)}Ext.callback(a.callback,a.scope,[a.operation])}});