Ext.data.JsonP.rtc_connect({"guide":"<h1 id='rtc_connect-section-%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0-webrtc-%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F'>Установка WebRTC соединения</h1>\n\n<h2 id='rtc_connect-section-%D0%BF%D0%BE%D1%81%D0%BB%D0%B5%D0%B4%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C-%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%B9-%D0%BF%D0%BE-%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D1%8E-webrtc-%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F-%D1%81-%D1%8F%D0%B4%D1%80%D0%BE%D0%BC.'>Последовательность операций по созданию WebRTC соединения с ядром.</h2>\n\n<table>\n<tr><td></td><td></td><td></td></tr>\n<tr>\n    <td style=\"background-color:rgb(217,226,243);\">Media</td>\n    <td style=\"background-color:rgb(217,226,243);\">&nbsp;&lt;&nbsp;</td>\n    <td>Обратиться к getUserMedia. Если не получилось – обломится.</td></tr>\n<tr>\n    <td style=\"background-color:rgb(142,170,219);\">Media</td>\n    <td style=\"background-color:rgb(142,170,219);\">&nbsp;&gt;&nbsp;</td>\n    <td>Поймать callback от getUserMedia</td></tr>\n<tr>\n    <td style=\"background-color:rgb(226,239,217);\">WebSocket</td>\n    <td style=\"background-color:rgb(226,239,217);\">&nbsp;&lt;&nbsp;</td>\n    <td>Выдать ядру команду CALLME_S1 для участника (себя)</td></tr>\n<tr>\n    <td style=\"background-color:rgb(168,208,141);\">WebSocket</td>\n    <td style=\"background-color:rgb(168,208,141);\">&nbsp;&gt;&nbsp;</td>\n    <td>Дождаться положительного ответа от ядра. При отрицательном – облом</td></tr>\n<tr>\n    <td style=\"background-color:rgb(168,208,141);\">WebSocket</td>\n    <td style=\"background-color:rgb(168,208,141);\">&nbsp;&gt;&nbsp;</td>\n    <td>Дождаться от ядра события conf.webrtc.servdesc</td></tr>\n<tr>\n    <td style=\"background-color:rgb(217,226,243);\">Media</td>\n    <td style=\"background-color:rgb(217,226,243);\">&nbsp;&lt;&nbsp;</td>\n    <td>Обратиться к PeerConnection. В качестве ICE-сервера подставить данные из conf.webrtc.servdesc</td></tr>\n<tr>\n    <td style=\"background-color:rgb(217,226,243);\">Media</td>\n    <td style=\"background-color:rgb(217,226,243);\">&nbsp;&lt;&nbsp;</td>\n    <td>Обратиться к createOffer</td></tr>\n<tr>\n    <td style=\"background-color:rgb(142,170,219);\">Media</td>\n    <td style=\"background-color:rgb(142,170,219);\">&nbsp;&gt;&nbsp;</td>\n    <td>Дождаться callback от createOffer</td></tr>\n<tr>\n    <td></td>\n    <td></td>\n    <td>Перелопатить SDP, вытащить из него ufrag и pwd</td></tr>\n<tr>\n    <td style=\"background-color:rgb(217,226,243);\">Media</td>\n    <td style=\"background-color:rgb(217,226,243);\">&nbsp;&lt;&nbsp;</td>\n    <td>Обратиться к setLocalDescription</td></tr>\n<tr>\n    <td style=\"background-color:rgb(142,170,219);\">Media</td>\n    <td style=\"background-color:rgb(142,170,219);\">&nbsp;&gt;&nbsp;</td>\n    <td>Дождаться callback от setLocalDescription</td></tr>\n<tr>\n    <td style=\"background-color:rgb(226,239,217);\">WebSocket</td>\n    <td style=\"background-color:rgb(226,239,217);\">&nbsp;&lt;&nbsp;</td>\n    <td>Выдать команду ядру CALLME_S2, ufrag и pwd для участника (себя)</td></tr>\n<tr>\n    <td style=\"background-color:rgb(168,208,141);\">WebSocket</td>\n    <td style=\"background-color:rgb(168,208,141);\">&nbsp;&gt;&nbsp;</td>\n    <td>Дождаться положительного ответа от ядра. При отрицательном – облом</td></tr>\n<tr>\n    <td style=\"background-color:rgb(168,208,141);\">WebSocket</td>\n    <td style=\"background-color:rgb(168,208,141);\">&nbsp;&gt;&nbsp;</td>\n    <td>Дождаться события от ядра conf.webrtc.servufrag</td></tr>\n<tr>\n    <td></td>\n    <td></td>\n    <td>Используя данные conf.webrtc.servufrag сформировать строчку RTCSessionDescription для дальней стороны.</td></tr>\n<tr>\n    <td style=\"background-color:rgb(217,226,243);\">Media</td>\n    <td style=\"background-color:rgb(217,226,243);\">&nbsp;&lt;&nbsp;</td>\n    <td>Обратиться с этими данными к setRemoteDescription</td></tr>\n<tr>\n    <td style=\"background-color:rgb(142,170,219);\">Media</td>\n    <td style=\"background-color:rgb(142,170,219);\">&nbsp;&gt;&nbsp;</td>\n    <td>Дождаться callback setRemoteDescription</td></tr>\n<tr>\n    <td style=\"background-color:rgb(142,170,219);\">Media</td>\n    <td style=\"background-color:rgb(142,170,219);\">&nbsp;&gt;&nbsp;</td>\n    <td>Дождаться evtAddStream</td></tr>\n<tr>\n    <td style=\"background-color:rgb(217,226,243);\">Media</td>\n    <td style=\"background-color:rgb(217,226,243);\">&nbsp;&lt;&nbsp;</td>\n    <td>Назначить входящий аудиопоток</td></tr>\n</table>\n\n\n\n","title":"Установка WebRTC соединения"});